<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>2026 è·¨å¹´è‰ºæœ¯ç››å…¸ | Cinematic Experience</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Zhi+Mang+Xing&family=Noto+Sans+SC:wght@300;500;700;900&family=JetBrains+Mono:wght@700&display=swap" rel="stylesheet">

<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
/* â€”â€” åªæ–°å¢ï¼Œä¸ç ´åä½ åŸæ ·å¼ â€”â€” */
.exporting * {
  animation: none !important;
  filter: none !important;
}
</style>
</head>

<body>
<div id="root"></div>

<audio id="bgm" preload="auto" muted>
  <!-- âš ï¸ æ¢æˆä½ è‡ªå·±çš„ raw åœ°å€ -->
  <source src="https://github.com/caoxing7115/heart-animation/blob/main/%E6%B5%86%E6%9E%9C.mp3" type="audio/mpeg">
</audio>

<script type="text/babel">
const { useState, useEffect, useRef } = React;

function App() {
  const [videoMuted, setVideoMuted] = useState(true);
  const videoRef = useRef(null);
  const cardRef = useRef(null);
  const audioRef = useRef(null);

  useEffect(() => {
    audioRef.current = document.getElementById('bgm');
  }, []);

  function toggleMute() {
    const next = !videoMuted;
    setVideoMuted(next);

    if (videoRef.current) {
      videoRef.current.muted = next;
    }

    if (!next && audioRef.current) {
      audioRef.current.muted = false;
      audioRef.current.currentTime = 0;
      audioRef.current.play().catch(()=>{});
    }
  }

  async function exportCard() {
    await document.fonts.ready;
    cardRef.current.classList.add('exporting');

    const canvas = await html2canvas(cardRef.current, {
      scale: 2,
      backgroundColor: null,
      windowWidth: cardRef.current.offsetWidth,
      windowHeight: cardRef.current.offsetHeight,
      useCORS: true
    });

    cardRef.current.classList.remove('exporting');

    const a = document.createElement('a');
    a.href = canvas.toDataURL('image/png');
    a.download = 'ç¥ç¦å¡-2026.png';
    a.click();
  }

  return (
    <div className="h-screen flex flex-col items-center justify-center gap-6">
      <video
        ref={videoRef}
        muted={videoMuted}
        autoPlay
        playsInline
        className="w-80 rounded-xl"
      >
        <source src="12æœˆ31æ—¥.mp4" type="video/mp4" />
      </video>

      <button onClick={toggleMute} className="px-4 py-2 bg-orange-500 rounded text-white">
        {videoMuted ? "ğŸ”‡" : "ğŸ”Š"}
      </button>

      <div
        ref={cardRef}
        className="w-80 p-6 rounded-xl bg-orange-500 text-white text-center font-bold text-xl"
      >
        ä¸‡ç‰©æ›´æ–°ï¼Œæ—§ç–¾å½“æ„ˆï¼Œé•¿å®‰å¸¸å®‰ã€‚
      </div>

      <button onClick={exportCard} className="px-4 py-2 bg-black text-white rounded">
        ä¸‹è½½å›¾ç‰‡
      </button>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
</body>
</html>
